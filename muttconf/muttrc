# Mutt configuration
#
# vim: set ft=muttrc :

# Allow resetting muttrc
reset all
unhook *

macro index     ~ ":source ~/.muttrc<enter>"     # reload .muttrc
macro pager     ~ ":source ~/.muttrc<enter>"     # reload .muttrc
macro index <F10> ":source ~/.mutt/profiles/default\n" "Load default profile"
macro index <F11> ":source ~/.mutt/profiles/diku\n" "Load profile: diku"
macro index <F12> ":source ~/.mutt/profiles/work\n" "Load profile: work"
macro pager \cb <pipe-entry>'urlview'<enter> 'Follow links with urlview'

set from = "ulrikbonde@gmail.com"
set realname = "Ulrik Bonde"
set imap_user = 'ulrikbonde'
set folder = "imaps://imap.gmail.com:993/"
set spoolfile = "+INBOX"
set smtp_url = "smtp://ulrikbonde@smtp.gmail.com:587/"
set imap_check_subscribed
set imap_keepalive = 900
set header_cache =~/.mutt/cache/headers
set message_cachedir =~/.mutt/cache/bodies
set certificate_file =~/.mutt/certificates
set ssl_starttls = yes
set mail_check=300
set editor="vim '+/^$'"
set move = no
set sort = 'threads'
set sort_aux = 'last-date-received'
set markers = no
set recall=no
set include=yes
set fast_reply=yes
set menu_scroll=yes
set postponed = "+[Gmail]/Drafts"
set alias_file=~/.mutt/mail_aliases
set sig_dashes
set attribution="On %d %n <%a> wrote:"
set date_format="%d/%m/%y at %H:%M"
set folder_format="%2C %t %N %8s %d %f"

folder-hook +Signatur "source ~/.mutt/profiles/work\n"
folder-hook +Spiltirsdag "source ~/.mutt/profiles/diku\n"
send-hook (work)$ "source ~/.mutt/profiles/work\n"

mailboxes "=INBOX" "=Signatur"

bind index <space> next-line
bind pager <space> next-line

subscribe spiltirsdag@diku.dk

ignore received content- mime-version status x-status message-id
ignore sender references return-path lines
ignore date delivered-to precedence errors-to in-reply-to user-agent
ignore x-loop x-sender x-mailer x-msmail-priority x-mimeole x-ms x-priority
ignore x-accept-language x-authentication-warning thread- priority importance
ignore x-original-to domainkey-signature dkim-signature
ignore authentication-results x-virus-scanned domain-key-signature 
ignore x-beenthere x-mailman-version list-
ignore x-google-sender-auth

# gpg setup
set pgp_decode_command="gpg %?p?--passphrase-fd 0? --no-verbose --charset utf-8 --batch --output - %f"
set pgp_verify_command="gpg --no-verbose --batch --output - --verify %s %f"
set pgp_decrypt_command="gpg --passphrase-fd 0 --no-verbose --batch --output - %f"
set pgp_sign_command="gpg --no-verbose --batch --output - --passphrase-fd 0 --armor --detach-sign --textmode %?a?-u %a? %f"
set pgp_clearsign_command="gpg --no-verbose --batch --charset utf-8 --output - --passphrase-fd 0 --armor --textmode --clearsign %?a?-u %a? %f"
set pgp_encrypt_only_command="pgpewrap gpg --batch --charset utf-8 --quiet --no-verbose --output - --encrypt --textmode --armor --always-trust --encrypt-to 0x79F9BADC -- -r %r -- %f"
set pgp_encrypt_sign_command="pgpewrap gpg --passphrase-fd 0 --batch --charset utf-8 --quiet --no-verbose --textmode --output - --encrypt --sign %?a?-u %a? --armor --always-trust --encrypt-to 0x79F9BADC -- -r %r -- %f"
set pgp_import_command="gpg --no-verbose --import -v %f"
set pgp_export_command="gpg --no-verbose --export --armor %r"
set pgp_verify_key_command="gpg --no-verbose --batch --fingerprint --check-sigs %r"
set pgp_list_pubring_command="gpg --no-verbose --batch --with-colons --list-keys %r" 
set pgp_list_secring_command="gpg --no-verbose --batch --with-colons --list-secret-keys %r" 
set pgp_autosign=no
set pgp_sign_as=0x79F9BADC
set pgp_timeout=1800
set pgp_good_sign="^gpg: Good signature from"
set pgp_replyencrypt		# Encrypt when replying to encrypted messages.
set pgp_replysignencrypted	# Sign when replying to encrypted messages.
set pgp_replysign		# Sign when replying to signed messages.

source $alias_file
source ~/.mutt/inkpot
source ~/.mutt/profiles/default
